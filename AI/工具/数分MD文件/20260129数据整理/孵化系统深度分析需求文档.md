# 孵化系统深度分析需求文档

## 1. 基础信息
- **文档名称**: 孵化系统多维度留存与倾向分析
- **创建日期**: 2026-01-29
- **数据库**: `nvwa_cbt1`, `nvwa_cooked_cbt1`
- **引擎要求**: Spark SQL

## 2. 已完成分析模块
目前已根据需求生成了以下 SQL 分析工具：

### A. 基础留存分析
- **[建筑等级留存分析_spark.sql]**: 分析不同家园建筑等级（building_type=101）下的玩家分布及次留情况。
- **[领取次数留存分析_spark.sql]**: 统计玩家累计领取孵化奖励的次数与留存/流失的关系。

### B. 孵化倾向与动力分析
- **[孵化倾向强度多阶梯分析_spark.sql]**: 针对 0129 注册用户，分析其孵化次数阶梯（>=3, >=4...）的分布及倾向强度。
- **[家园等级与孵化次数留存对比_spark.sql]**: 交叉对比相同家园等级下，不同孵化次数档位的玩家留存差异。

### C. 特定玩家行为追踪
- **[特定玩家ID提取_家园1级孵化6次以上_spark.sql]**: 提取处于新手阶段（家园1级）但具有极高孵化积极性的玩家名单。
- **[特定玩家生命源质产销记录_带家园等级_spark.sql]**: 追踪特定账号在不同家园等级下，生命源质（Item ID: 4001001-4005001）的产销日志。

## 3. 后续待分析方向
- [ ] 孵化行为与付费转化的关联分析。
- [ ] 不同孵化类型（PetCreateCustom 中的参数）的效果对比。
- [ ] 玩家从获取孵化机会到实际执行孵化的漏斗转化。
