# 星际驿站 (Stellar Station) - 游戏开发设计文档 V2.2

## 1. 项目概述 (Project Overview)
*   **游戏名称**：星际驿站 (Stellar Station)
*   **核心概念**：节点探险 + 基因模拟 + 物理沙盒 + 放置养成
*   **版本变更**：V2.2 引入了宠物状态表情系统与实体建筑交互，增强了家园的循环体验。

---

## 2. 核心玩法循环 (Core Loop)

```mermaid
graph LR
    Step1[**探险 (Exploration)**<br/>节点移动/负重决策] --> Step2[**收获 (Loot)**<br/>资源/基因]
    Step2 --> Step3[**实验室 (Lab)**<br/>基因重随/实体化]
    Step3 --> Step4[**家园 (Home)**<br/>物理互动/需求满足/服务循环]
    Step4 --> Step5[**经济 (Economy)**<br/>实体商店/购买服务设施]
    Step5 --> Step1
```

---

## 3. 新增系统设计 (New Systems V2.2)

### 3.1 宠物状态与表情 (Status & Emojis)
*   **状态气泡**：宠物头顶实时显示当前状态的气泡。
    *   `🍖` **饥饿**：饥饿值过低，寻找喂食器。
    *   `🌧️` **难过**：心情值过低，寻找玩具。
    *   `💩` **脏了**：随机触发，寻找淋浴间。
    *   `✨` **开心**：心情极佳。
    *   `😵` **眩晕**：被玩家物理抓取/投掷时。
*   **需求循环 (Needs Loop)**：
    *   宠物拥有 **饥饿 (Hunger)** 和 **心情 (Mood)** 属性。
    *   属性随时间自然衰减。
    *   宠物会根据当前最紧迫的需求（饥饿 > 心情 > 清洁），自动寻找家园内的对应设施。

### 3.2 实体建筑与服务设施 (Buildings & Facilities)
*   **实体商店 (Shop Building)**：
    *   家园中新增固定建筑 **[星际商店]** (🏪)。
    *   玩家需点击该建筑才能打开买卖界面，增强场景沉浸感。
*   **服务型家具**：
    *   **自动喂食器 (Auto Feeder)**：解决饥饿问题。
    *   **玩具箱 (Toy Box)**：快速恢复心情。
    *   **声波淋浴 (Sonic Shower)**：解决清洁需求。
    *   玩家需要在商店购买这些设施并布置在家园中，以构建自动化的宠物生活循环。

---

## 4. 既有系统回顾 (Retained Systems)

### 4.1 探险与背包 (Exploration)
*   保留 V2.1 的 **负重背包** 机制。
*   保留节点地图与属性判定。

### 4.2 基因实验室 (Gene Lab)
*   保留 **模拟重随 (Reroll)** 机制。
*   保留 AI 性格分析与实体化流程。

### 4.3 物理互动 (Physics)
*   保留 **上帝之手**（抓取/投掷）。
*   保留家具属性共鸣 Buff。

---

## 5. Demo 更新内容
*   **UI**：新增宠物头顶气泡绘制逻辑。
*   **AI**：新增基于需求（饥饿/心情）的寻路逻辑。
*   **数据**：新增 `hunger` 属性，新增 3 种服务型家具。
